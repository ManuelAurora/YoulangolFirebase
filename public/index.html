
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Tutorial Requests</title>
  <!-- stylesheets -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
</head> 
  <body>
  <h1>Tutorial requests</h1>
  
  <!-- new request modal -->
  <div class="new-request">
    <div class="modal">
      <h2>Request a Tutorial</h2>
      <form>
        <input type="text" name="request" placeholder="Request...">
        <button>Submit Request</button>
        <p class="error"></p>
      </form>
    </div>
  </div>

  <header>
    <nav>
      <a class="add-request">add request</a>
      <a class="sign-out">sign out</a>
    </nav>
  </header>

  <section class="content">
    <h1>Tutorial Requests</h1>
    <ul class="request-list">
      <li>
        <span class="text">Laravel 6 tutorial</span>
        <div>
          <span class="votes">125</span>
          <i class="material-icons upvote">arrow_upward</i>
        </div>
      </li>
    </ul>
    <button class="call">Say Hello</button>
  </section>
  <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-app.js"></script>
  <script src="app.js"></script>
  <script src="index.js"></script>
  <!-- Add additional services that you want to use -->
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-functions.js"></script>
  <script>
    const button = document.querySelector('.call');

    button.addEventListener('click', async () => {
      console.log('Button clicked');

      const generateRandomPrice = () => {
        return Math.floor(Math.random() * 5001) + 5000;
      };

      const generateRandomTimestamp = () => {
        const now = new Date();
        const currentMonth = now.getMonth();
        const randomMonth = Math.floor(Math.random() * 12);
        now.setMonth(randomMonth);
        const timestamp = now.getTime();
        now.setMonth(currentMonth);
        return timestamp;
      };
      
      const generateRandomString = () => {
        const alphabet = 'abcdefghijklmnopqrstuvwxyz';
        let result = '';
        for (let i = 0; i < 10; i++) {
          result += alphabet.charAt(Math.floor(Math.random() * alphabet.length));
        }
        return result;
      };

      const cities = {
        'Benguela': {latitude: -12.5763, longitude: 13.4055},
        'Luanda': {latitude: -8.8399, longitude: 13.2894},
        'Soyo': {latitude: -6.1349, longitude: 12.3689},
        'Cabinda': {latitude: -5.5516, longitude: 12.1951},
      };

      const id = generateRandomString();
      const price = generateRandomPrice();
      const cityNames = Object.keys(cities);
      const randomCity = cityNames[Math.floor(Math.random() * cityNames.length)];
      const location = {
        city: randomCity,
        latitude: cities[randomCity].latitude,
        longitude: cities[randomCity].longitude,
        description: `Angola ${randomCity}`,
        displayName: randomCity
      };

      const timestamp = generateRandomTimestamp();
      const post = {
        id,
        image: 'https://www.meme-arsenal.com/memes/1f20c507a102ba45460319c2b92c1b69.jpg',
        price,
        title: 'Title',
        categoryId: 'pron',
        timestamp,
        ownerId: 'abc',
        description: 'Random description',
        images: [
          'https://www.meme-arsenal.com/memes/1f20c507a102ba45460319c2b92c1b69.jpg',
          'https://www.meme-arsenal.com/memes/1f20c507a102ba45460319c2b92c1b69.jpg'
        ],
        location
      };
      console.log(post);
      try {
        const createPost = firebase.functions().httpsCallable('createPost');
        const result = await createPost(post);
        console.log('Post created:', result.data);
      } catch (error) {
        console.error('Error creating post:', error);
      }
    });

  </script>
  
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-analytics.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyDQBIMP7jm2LucgbOycbzXI8IQ7kun6dBE",
      authDomain: "youlangol.firebaseapp.com",
      databaseURL: "https://youlangol-default-rtdb.firebaseio.com",
      projectId: "youlangol",
      storageBucket: "youlangol.appspot.com",
      messagingSenderId: "930757741700",
      appId: "1:930757741700:web:f14dcc71175d748152c6d1",
      measurementId: "G-85MXX94JNX"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    
  </script>
  </body>
</html>
