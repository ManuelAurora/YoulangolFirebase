<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Tutorial Requests</title>
    <!-- stylesheets -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
<h1>Tutorial requests</h1>

<!-- new request modal -->
<div class="new-request">
    <div class="modal">
        <h2>Request a Tutorial</h2>
        <form>
            <input type="text" name="request" placeholder="Request...">
            <button>Submit Request</button>
            <p class="error"></p>
        </form>
    </div>
</div>

<header>
    <nav>
        <a class="add-request">add request</a>
        <a class="sign-out">sign out</a>
    </nav>
</header>

<section class="content">
    <h1>Tutorial Requests</h1>
    <ul class="request-list">
        <li>
            <span class="text">Laravel 6 tutorial</span>
            <div>
                <span class="votes">125</span>
                <i class="material-icons upvote">arrow_upward</i>
            </div>
        </li>
    </ul>
    <button class="call">Say Hello</button>
</section>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
    import { getFunctions, httpsCallable } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-functions.js";

    const firebaseConfig = {
        apiKey: "AIzaSyDQBIMP7jm2LucgbOycbzXI8IQ7kun6dBE",
        authDomain: "youlangol.firebaseapp.com",
        databaseURL: "https://youlangol-default-rtdb.firebaseio.com",
        projectId: "youlangol",
        storageBucket: "youlangol.appspot.com",
        messagingSenderId: "930757741700",
        appId: "1:930757741700:web:f14dcc71175d748152c6d1",
        measurementId: "G-85MXX94JNX"
    };

    const firebaseApp = initializeApp(firebaseConfig);

    const myFunction = httpsCallable(getFunctions(firebaseApp), "getPosts");

    const button = document.querySelector('.call');

    button.addEventListener('click', () => {
        myFunction({ page: 1 })
            .then((result) => {
                console.log(result.data);
            })
            .catch(console.error);
    });
</script>

</body>
</html>
